export var EditableListPart,f='editable-list';(function(a){a['Items']='items';a['AddButton']='add';a['ItemsSlot']='items-slot';a['EditButton']='edit';a['RemoveButton']='remove'})(EditableListPart||(EditableListPart={}));export var ButtonTemplatePart;(function(A){A['RemoveButton']='remove-button';A['EditButton']='edit-button'})(ButtonTemplatePart||(ButtonTemplatePart={}));var c=new Set(['style','template']);var d=`<div id="${EditableListPart.Items}"><slot id="${EditableListPart.ItemsSlot}"></slot></div>
<slot name="add"><button id="${EditableListPart.AddButton}" class="button" type="button">&plus;</button></slot>`;var e=new CSSStyleSheet();e.replaceSync(`
* { box-sizing: border-box; }
:host
{
    /* begin default ul styles */
    display: block;
    list-style-type: disc;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
    /* end default ul styles */
}`);export class EditableListElement extends HTMLElement{canRemove=!0;canEdit=!1;#boundEventHandlers=new Map([['add',this.#addButton_onClick.bind(this)]]);componentParts=new Map();getElement(id){if(this.componentParts.get(id)==null){var part=this.findElement(id);part!=null&&this.componentParts.set(id,part)}return this.componentParts.get(id)}findElement(id){return this.shadowRoot.getElementById(id)}constructor(){super();this.attachShadow({mode:'open'});this.shadowRoot.innerHTML=d;this.shadowRoot.adoptedStyleSheets.push(e);this.addEventListener('click',_=>{let b=_.composedPath().find(C=>C instanceof HTMLButtonElement);if(b==null)return;let B=b.parentElement;if(b.classList.contains('edit')){var D=this.dispatchEvent(new CustomEvent('edit', {detail:B,bubbles:!0}));this.hasAttribute('cancel-edit')&&(_.preventDefault(),_.stopPropagation())}else if(b.classList.contains('remove')){const _a=this.dispatchEvent(new CustomEvent('remove', {detail:B,bubbles:!0,cancelable:!0}));_a==!0&&B.remove();this.hasAttribute('cancel-remove')&&(_.preventDefault(),_.stopPropagation())}});this.findElement(EditableListPart.AddButton)?.addEventListener('click',this.#boundEventHandlers.get('add'));this.getElement(EditableListPart.ItemsSlot).addEventListener('slotchange',this.#updateItemButtons.bind(this));this.#applyPartAttributes()}#applyPartAttributes(){var _A=this.shadowRoot.querySelectorAll('[id]');for(let i=0;i<_A.length;i++)_A[i].part.add(_A[i].id);var _b=this.shadowRoot.querySelectorAll('[class]');for(let i=0;i<_b.length;i++)_b[i].part.add(..._b[i].classList)}static create(E){var _B=document.createElement(f);if(E==null)return _B;for(const[aA,aB] of Object.entries(E))if(aA=='remove')(aB==!1)?_B.setAttribute(aA,'false'):_B.removeAttribute(aA);else if(aA=='edit')(aB==!0)?_B.setAttribute(aA,'true'):_B.removeAttribute(aA);else if(aA.startsWith('on')){var _c=aA.substring(2).toLowerCase();_B.addEventListener(_c,aB)}return _B}#addButton_onClick(){this.dispatchEvent(new CustomEvent('add'))}#updateItemButtons(){var aC=this.getElement(EditableListPart.ItemsSlot).assignedElements();for(const[i,aE] of aC.entries()){if(c.has(aE.tagName.toLowerCase()))continue;else if(aE.tagName.toLowerCase()=='slot'){aC.push(...aE.assignedElements());continue}var aD=aC[i],_C=aC[i].querySelector(`button.${EditableListPart.EditButton}`);if(this.canEdit)if(_C==null){var _d=document.createElement('button'),F=this.querySelector(`template[part="${ButtonTemplatePart.EditButton}"]`);_d.type='button';var _e=this.getAttribute('edit-class')?.trim()??'';_d.classList.add(EditableListPart.EditButton);_e!=''&&_d.classList.add(..._e.split(' '));_d.setAttribute('part',`${EditableListPart.EditButton}${(_e!='')?` ${_e}`:''}`);F!=null?_d.append(F.content.cloneNode(!0)):_d.textContent='…';aD.appendChild(_d)}else _C!=null&&_C.remove();var g=aC[i].querySelector(`button.${EditableListPart.RemoveButton}`);if(this.canRemove)if(g==null){var h=document.createElement('button'),aF=this.querySelector(`template[part="${ButtonTemplatePart.RemoveButton}"]`);h.type='button';var I=this.getAttribute('remove-class')?.trim()??'';h.classList.add(EditableListPart.RemoveButton);I!=''&&h.classList.add(...I.split(' '));h.setAttribute('part',`${EditableListPart.RemoveButton}${(I!='')?` ${I}`:''}`);aF!=null?h.append(aF.content.cloneNode(!0)):h.textContent='×';aD.appendChild(h)}else g!=null&&g.remove()}}static observedAttributes=['remove','edit'];attributeChangedCallback(aG,aH,aI){if(aG=='remove'){aI==null||aI.trim()=='true'?this.canRemove=!0:this.canRemove=!1;this.#updateItemButtons()}else if(aG=='edit'){aI==null||aI.trim()!='true'?this.canEdit=!1:this.canEdit=!0;this.#updateItemButtons()}}}customElements.get(f)==null&&customElements.define(f,EditableListElement);
