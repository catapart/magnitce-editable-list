export var EditableListPart,f='editable-list';(function(a){a['Items']='items';a['AddButton']='add';a['ItemsSlot']='items-slot';a['EditButton']='edit';a['RemoveButton']='remove'})(EditableListPart||(EditableListPart={}));export var ButtonTemplatePart;(function(A){A['RemoveButton']='remove-button';A['EditButton']='edit-button'})(ButtonTemplatePart||(ButtonTemplatePart={}));var c=new Set(['style','template']);var d=`<div part="${EditableListPart.Items}"><slot part="${EditableListPart.ItemsSlot}"></slot></div>
<slot name="add"><button part="${EditableListPart.AddButton}" type="button">&plus;</button></slot>`;var e=new CSSStyleSheet();e.replaceSync(`
* { box-sizing: border-box; }
:host
{
    /* begin default ul styles */
    display: block;
    list-style-type: disc;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
    /* end default ul styles */
}`);export class EditableListElement extends HTMLElement{canRemove=!0;canEdit=!1;#boundEventHandlers=new Map([['add',this.#addButton_onClick.bind(this)]]);componentParts=new Map();getPart(_){if(this.componentParts.get(_)==null){var b=this.shadowRoot.querySelector(`[part="${_}"]`);b!=null&&this.componentParts.set(_,b)}return this.componentParts.get(_)}findPart(B){return this.shadowRoot.querySelector(`[part="${B}"]`)}constructor(){super();this.attachShadow({mode:'open'});this.shadowRoot.innerHTML=d;this.shadowRoot.adoptedStyleSheets.push(e);this.addEventListener('click',C=>{let _b=C.composedPath().find(_a=>_a instanceof HTMLButtonElement);if(_b==null)return;let _c=_b.parentElement;var D=_b.getAttribute('part');if(D=='edit'){var E=this.dispatchEvent(new CustomEvent('edit', {detail:_c,bubbles:!0}));(E==!1&&this.getAttribute('button-propagation')=='false')&&(C.preventDefault(),C.stopPropagation())}else if(D=='remove'){const _A=this.dispatchEvent(new CustomEvent('remove', {detail:_c,bubbles:!0,cancelable:!0}));if(_A==!0)_c.remove();else this.getAttribute('button-propagation')=='false'&&(C.preventDefault(),C.stopPropagation())}});this.findPart(EditableListPart.AddButton)?.addEventListener('click',this.#boundEventHandlers.get('add'));this.getPart(EditableListPart.ItemsSlot).addEventListener('slotchange',this.#updateItemButtons.bind(this))}static create(aA){var _B=document.createElement(f);if(aA==null)return _B;for(const[aB,aC] of Object.entries(aA))if(aB=='remove')(aC==!1)?_B.setAttribute(aB,'false'):_B.removeAttribute(aB);else if(aB=='edit')(aC==!0)?_B.setAttribute(aB,'true'):_B.removeAttribute(aB);else if(aB.startsWith('on')){var _C=aB.substring(2).toLowerCase();_B.addEventListener(_C,aC)}return _B}#addButton_onClick(){this.dispatchEvent(new CustomEvent('add'))}#updateItemButtons(){var aD=this.getPart(EditableListPart.ItemsSlot).assignedElements();for(const[i,aG] of aD.entries()){if(c.has(aG.tagName.toLowerCase()))continue;else if(aG.tagName.toLowerCase()=='slot'){aD.push(...aG.assignedElements());continue}var aE=aD[i],aF=aD[i].querySelector(`button[part="${EditableListPart.EditButton}"]`);if(this.canEdit)if(aF==null){var _d=document.createElement('button');_d.type='button';_d.setAttribute('part','edit');var _e=this.querySelector(`template[part="${ButtonTemplatePart.EditButton}"]`);_e!=null?_d.append(_e.content.cloneNode(!0)):_d.textContent='…';aE.appendChild(_d)}else aF!=null&&aF.remove();var F=aD[i].querySelector(`button[part="${EditableListPart.RemoveButton}"]`);if(this.canRemove)if(F==null){var g=document.createElement('button');g.type='button';g.setAttribute('part','remove');const aH=this.querySelector(`template[part="${ButtonTemplatePart.RemoveButton}"]`);aH!=null?g.append(aH.content.cloneNode(!0)):g.textContent='×';aE.appendChild(g)}else F!=null&&F.remove()}}static observedAttributes=['remove','edit'];attributeChangedCallback(aI,aJ,aK){if(aI=='remove'){aK==null||aK.trim()=='true'?this.canRemove=!0:this.canRemove=!1;this.#updateItemButtons()}else if(aI=='edit'){aK==null||aK.trim()!='true'?this.canEdit=!1:this.canEdit=!0;this.#updateItemButtons()}}}customElements.get(f)==null&&customElements.define(f,EditableListElement);
